#!/bin/bash
#notify-send --urgency=normal "Updating adblock"
pkill herbe && herbe "Updating adblock"

EASYLIST_PATH="${HOME}/.config/wyebadblock/"

if [[ ! -d "${EASYLIST_PATH}" ]];
then
    mkdir -p "${EASYLIST_PATH}"
fi

pushd /tmp
    wget -O 1.txt https://easylist.to/easylist/easylist.txt
    wget -O 2.txt https://easylist.to/easylist/easyprivacy.txt
    wget -O 3.txt https://secure.fanboy.co.nz/fanboy-annoyance.txt
    cat 1.txt 2.txt 3.txt > "${EASYLIST_PATH}/easylist.txt"
    result="$?"
popd

if [[ "${result}" == "0" ]];
then
    #notify-send --urgency=normal "Adblock update done"
    pkill herbe && herbe "Adblock update done"
else
    #notify-send --urgency=normal "Failed to update adblock"
    pkill herbe && herbe "Failed to update adblock"
fi
