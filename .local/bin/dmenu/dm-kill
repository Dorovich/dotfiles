#!/bin/env bash

if [ -f $HOME/.dmenurc ]; then
  . $HOME/.dmenurc
else
  DMENU='dmenu -h 18 -i'
fi

selected=$(ps --user "$USER" -F | \
                $DMENU -l 5 -p "Search for process to kill:" | \
                awk '{print $2" "$11}')

if [ "$selected" ]; then
    answer=$(echo -e "No\nYes" | $DMENU -p "Kill $selected?")

    if [ "$answer" == "Yes" ]; then
        kill -9 "${selected%% *}"
        echo "Process $selected has been killed."
    else
        echo "Program terminated."
    fi
fi
